<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>XHR - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#JS">JS</a>&nbsp;»&nbsp;XHR</div>
</div>
<div class="clearfix"></div>
<div id="title">XHR</div>
  <div id="content">
  <h2 id="xmlhttprequest">XMLHttpRequest</h2>
<p>现在所有浏览器都支持XMLHttpRequest对象，(IE5,IE6使用ActiveObject)。</p>
<p>XMLHttpRequest用于在后台与服务器交换数据。</p>
<h2 id="xhr">创建XHR对象</h2>
<div class="hlcode"><pre>var xmlhttp = new XMLHttpRequest();
</pre></div>


<h2 id="xhr_1">XHR 请求</h2>
<div class="hlcode"><pre>xmlhttp.open(&quot;GET&quot;, &quot;file&quot;, true);
xmlhttp.send();

xmlhttp.open(&quot;POST&quot;, &quot;ajax.html&quot;, true);
xmlhttp.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencode&quot;);
xmlhttp.send(&quot;name=janes&amp;passwd=123456&quot;);
</pre></div>


<div class="hlcode"><pre>open(method, url, async)
    method: 请求的类型，GET or POST
    url: 文件在服务器的位置
    async:true(异步)， flasse(同步)

send(string)
    string: 仅用于POST请求

serRequestHeader(header,value)
    header:请求头名称
    value:请求头的值
</pre></div>


<p>注：</p>
<ul>
<li>POST vs GET</li>
</ul>
<p>1.特定情况使用POST</p>
<div class="hlcode"><pre>无法使用缓存文件（更新服务器上的文件或数据库）
向服务器发送大量数据（POST没有数据量限制）
发送包含未知字符串的用户输入时
</pre></div>


<ul>
<li>open async</li>
</ul>
<p>XHR对象用于AJAX的话，async必须设置为true, </p>
<h2 id="_1">服务器响应</h2>
<div class="hlcode"><pre>responseText
    获得字符串形式的响应数据
responseXML
    获得XML形式的响应数据
</pre></div>


<h2 id="onreadystatechange">onreadystatechange 事件</h2>
<p>当请求被发送到服务器时，执行一些基于响应的任务</p>
<p>每当readyState 改变时，就会触发onreadystatechange事件</p>
<p>readyState属性存有XMLHttpRequest的状态信息</p>
<div class="hlcode"><pre>onreadystatechange
    存储函数或函数名，每当readyState属性改变时，就会调用该函数

readyState
    0: 请求未初始化
    1: 服务器连接已建立
    2: 请求已接收
    3: 请求处理中
    4: 请求已完成，且响应就绪

state
    200: OK
    404: not found
</pre></div>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>