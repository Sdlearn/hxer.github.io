<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>http_server - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Python">Python</a>&nbsp;»&nbsp;http_server</div>
</div>
<div class="clearfix"></div>
<div id="title">http_server</div>
  <div id="content">
  <h1 id="run-a-simple-http-server">run a simple http server</h1>
<ul>
<li>命令行运行</li>
</ul>
<div class="hlcode"><pre><span class="nx">cd</span> <span class="err">~</span><span class="p">/</span><span class="nx">www</span>    <span class="err">#切换到你想在浏览器上访问的目录</span>
<span class="nx">python</span> <span class="na">-m</span> <span class="nx">SimpleHTTPServer</span> <span class="err">[</span><span class="o">&lt;</span><span class="nb">port</span><span class="o">&gt;</span><span class="cp">]</span> #默认端口8000
</pre></div>


<p>访问</p>
<div class="hlcode"><pre><span class="nl">http:</span><span class="c1">//127.0.0.1:8000/index.html</span>
<span class="nl">http:</span><span class="c1">//your_ip:8000/index.html</span>
</pre></div>


<h1 id="wsgi">wsgi</h1>
<p>WSGI provides a minimal interface between Python Web servers and Python Web Frameworks. It’s very simple and it’s easy to implement on both the server and the framework side. The following code snippet shows the server and the framework side of the interface:</p>
<div class="hlcode"><pre><span class="k">def</span> <span class="nf">run_application</span><span class="p">(</span><span class="n">application</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Server code.&quot;&quot;&quot;</span>
    <span class="c"># This is where an application/framework stores</span>
    <span class="c"># an HTTP status and HTTP response headers for the server</span>
    <span class="c"># to transmit to the client</span>
    <span class="n">headers_set</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c"># Environment dictionary with WSGI/CGI variables</span>
    <span class="n">environ</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">start_response</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">response_headers</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">headers_set</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">status</span><span class="p">,</span> <span class="n">response_headers</span><span class="p">]</span>

    <span class="c"># Server invokes the ‘application&#39; callable and gets back the</span>
    <span class="c"># response body</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">application</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>
    <span class="c"># Server builds an HTTP response and transmits it to the client</span>
    <span class="err">…</span>

<span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A barebones WSGI app.&quot;&quot;&quot;</span>
    <span class="n">start_response</span><span class="p">(</span><span class="s">&#39;200 OK&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s">&#39;text/plain&#39;</span><span class="p">)])</span>
    <span class="k">return</span> <span class="p">[</span><span class="s">&#39;Hello world!&#39;</span><span class="p">]</span>

<span class="n">run_application</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>


<p>Here is how it works:</p>
<ul>
<li>
<p>The framework provides an ‘application’ callable (The WSGI specification doesn’t prescribe how that should be implemented)</p>
</li>
<li>
<p>The server invokes the ‘application’ callable for each request it receives from an HTTP client. It passes a dictionary ‘environ’ containing WSGI/CGI variables and a ‘start_response’ callable as arguments to the ‘application’ callable.</p>
</li>
<li>
<p>The framework/application generates an HTTP status and HTTP response headers and passes them to the ‘start_response’ callable for the server to store them. The framework/application also returns a response body.</p>
</li>
<li>
<p>The server combines the status, the response headers, and the response body into an HTTP response and transmits it to the client</p>
</li>
</ul>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>