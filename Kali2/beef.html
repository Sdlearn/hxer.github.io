<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>Beef - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Kali2">Kali2</a>&nbsp;»&nbsp;Beef</div>
</div>
<div class="clearfix"></div>
<div id="title">Beef</div>
  <div id="content">
  <h2 id="beef">beef 简介</h2>
<h2 id="beef_1">beef 安装</h2>
<h2 id="beef_2">beef 使用</h2>
<ul>
<li>构造自己的hook html</li>
</ul>
<p>只用将beef 提供的hook.js嵌入到自己构造的html页面就能作为可以hook的页面。</p>
<ul>
<li>./beef -h</li>
</ul>
<div class="hlcode"><pre><span class="n">Usage</span><span class="o">:</span> <span class="n">beef</span> <span class="o">[</span><span class="n">options</span><span class="o">]</span>
    <span class="o">-</span><span class="n">x</span><span class="o">,</span> <span class="o">--</span><span class="n">reset</span>                      <span class="n">Reset</span> <span class="n">the</span> <span class="n">database</span>
    <span class="o">-</span><span class="n">v</span><span class="o">,</span> <span class="o">--</span><span class="n">verbose</span>                    <span class="n">Display</span> <span class="n">debug</span> <span class="n">information</span>
    <span class="o">-</span><span class="n">a</span><span class="o">,</span> <span class="o">--</span><span class="n">ascii_art</span>                  <span class="n">Prints</span> <span class="n">BeEF</span> <span class="n">ascii</span> <span class="n">art</span>
    <span class="o">-</span><span class="n">c</span><span class="o">,</span> <span class="o">--</span><span class="n">config</span> <span class="n">FILE</span>                <span class="n">Load</span> <span class="n">a</span> <span class="n">different</span> <span class="n">configuration</span> <span class="n">file</span><span class="o">:</span> <span class="k">if</span> <span class="n">it</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">called</span> <span class="n">custom</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="na">yaml</span><span class="o">,</span> <span class="n">git</span> <span class="n">automatically</span> <span class="n">ignores</span> <span class="n">it</span><span class="o">.</span>
    <span class="o">-</span><span class="n">p</span><span class="o">,</span> <span class="o">--</span><span class="n">port</span> <span class="n">PORT</span>                  <span class="n">Change</span> <span class="n">the</span> <span class="k">default</span> <span class="n">BeEF</span> <span class="n">listening</span> <span class="n">port</span>
    <span class="o">-</span><span class="n">w</span><span class="o">,</span> <span class="o">--</span><span class="n">wsport</span> <span class="n">WS_PORT</span>             <span class="n">Change</span> <span class="n">the</span> <span class="k">default</span> <span class="n">BeEF</span> <span class="n">WebSocket</span> <span class="n">listening</span> <span class="n">port</span>
    <span class="o">-</span><span class="n">i</span><span class="o">,</span> <span class="o">--</span><span class="n">interactive</span>                <span class="n">Starts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">Console</span> <span class="n">Shell</span> <span class="n">activated</span>
</pre></div>


<h2 id="beef-project">beef project 结构</h2>
<h2 id="modules">modules</h2>
<p>modules 分为12类</p>
<p>每类里面最底层的方法构成: command.js, config.yaml, module.rb</p>
<ul>
<li>Browser</li>
</ul>
<p>Hooked Domain</p>
<div class="hlcode"><pre><span class="n">Fingerprint</span> <span class="n">Ajax:</span> <span class="n">Fingerprint</span> <span class="n">Ajax</span> <span class="o">and</span> <span class="n">JS</span> <span class="n">libraries</span> <span class="n">present</span> <span class="n">on</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">page</span>.
<span class="n">Create</span> <span class="n">Alert</span> <span class="n">Dialog:</span> <span class="n">Sends</span> <span class="n">an</span> <span class="n">alert</span> <span class="n">dialog</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">browser</span>.
<span class="n">Clear</span> <span class="n">Console:</span> <span class="n">This</span> <span class="k">module</span> <span class="n">clears</span> <span class="n">the</span> <span class="n">Chrome</span> <span class="n">developer</span> <span class="n">console</span> <span class="n">buffer</span>.
<span class="n">Replace</span> <span class="n">Content</span> (<span class="n">Deface</span>): <span class="n">Overwrite</span> <span class="n">the</span> <span class="n">page</span>, <span class="n">title</span> <span class="o">and</span> <span class="n">shortcut</span> <span class="n">icon</span> <span class="n">on</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">page</span>.
<span class="n">Replace</span> <span class="n">Component</span> (<span class="n">Deface</span>): <span class="n">Overwrite</span> <span class="n">a</span> <span class="n">particular</span> <span class="n">component</span> <span class="k">of</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">page</span>.
<span class="n">Disable</span> <span class="n">Developer</span> <span class="n">Tools:</span> <span class="n">This</span> <span class="k">module</span> <span class="n">prevents</span> <span class="n">users</span> <span class="nb">from</span> <span class="n">executing</span> <span class="n">JavaScript</span> <span class="n">within</span> <span class="n">the</span> <span class="n">Internet</span> <span class="n">Explorer</span> <span class="n">Developer</span> <span class="n">Tools</span> <span class="n">console</span>.
<span class="n">Get</span> <span class="n">Cookie:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">retrieve</span> <span class="n">the</span> <span class="n">session</span> <span class="n">cookie</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">current</span> <span class="n">page</span>.
<span class="n">Get</span> <span class="n">Form</span> <span class="n">Values:</span> <span class="n">This</span> <span class="k">module</span> <span class="n">retrieves</span> <span class="n">the</span> <span class="nb">name</span>, <span class="n">type</span>, <span class="o">and</span> <span class="nb">value</span> <span class="k">of</span> <span class="nb">all</span> <span class="n">input</span> <span class="n">fields</span> <span class="n">on</span> <span class="n">the</span> <span class="n">page</span>.
<span class="n">Get</span> <span class="n">Local</span> <span class="n">Storage:</span> <span class="n">Extracts</span> <span class="n">data</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">HTML5</span> <span class="n">localStorage</span> <span class="n">object</span>.
<span class="n">Get</span> <span class="n">Page</span> <span class="n">HTML:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">retrieve</span> <span class="n">the</span> <span class="n">HTML</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">current</span> <span class="n">page</span>.
<span class="n">Get</span> <span class="n">Page</span> <span class="o">and</span> <span class="n">iframe</span> <span class="n">HTML:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">retrieve</span> <span class="n">the</span> <span class="n">HTML</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">current</span> <span class="n">page</span> <span class="o">and</span> <span class="nb">any</span> <span class="n">iframes</span> (<span class="n">that</span> <span class="n">have</span> <span class="n">the</span> <span class="n">same</span> <span class="n">origin</span>).
<span class="n">Get</span> <span class="n">Page</span> <span class="n">HREFs:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">retrieve</span> <span class="n">HREFs</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">target</span> <span class="n">page</span>.
<span class="n">Get</span> <span class="n">Session</span> <span class="n">Storage:</span> <span class="n">Extracts</span> <span class="n">data</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">HTML5</span> <span class="n">sessionStorage</span> <span class="n">object</span>.
<span class="n">Get</span> <span class="n">Stored</span> <span class="n">Credentials:</span> <span class="n">This</span> <span class="k">module</span> <span class="n">retrieves</span> <span class="n">saved</span> <span class="n">username</span><span class="o">/</span><span class="n">password</span> <span class="n">combinations</span> <span class="nb">from</span> <span class="n">the</span> <span class="n">login</span> <span class="n">page</span> <span class="n">on</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">domain</span>.<span class="s">&lt;br /&gt;&lt;br /&gt;</span><span class="n">It</span> <span class="k">will</span> <span class="k">fail</span> <span class="k">if</span> <span class="n">more</span> <span class="n">than</span> <span class="nb">one</span> <span class="n">set</span> <span class="k">of</span> <span class="n">domain</span> <span class="n">credentials</span> <span class="n">are</span> <span class="n">saved</span> <span class="n">in</span> <span class="n">the</span> <span class="n">browser</span>.
<span class="n">Replace</span> <span class="n">HREFs:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">rewrite</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">href</span> <span class="n">attributes</span> <span class="k">of</span> <span class="nb">all</span> <span class="n">matched</span> <span class="n">links</span>.
<span class="n">Replace</span> <span class="n">HREFs</span> (<span class="n">Click</span> <span class="n">Events</span>): <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">rewrite</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">href</span> <span class="n">attributes</span> <span class="k">of</span> <span class="nb">all</span> <span class="n">matched</span> <span class="n">links</span> <span class="n">using</span> <span class="n">Bilawal</span> <span class="n">Hameed&#39;s</span> <span class="n">updating</span> <span class="k">of</span> <span class="n">click</span> <span class="n">event</span> <span class="n">handling</span>. <span class="n">This</span> <span class="k">will</span> <span class="n">hide</span> <span class="n">the</span> <span class="n">target</span> <span class="n">site</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">updated</span> <span class="n">links</span>.
<span class="n">Replace</span> <span class="n">HREFs</span> (<span class="n">HTTPS</span>): <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">rewrite</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">href</span> <span class="n">attributes</span> <span class="k">of</span> <span class="n">HTTPS</span> <span class="n">links</span> <span class="nb">to</span> <span class="k">use</span> <span class="n">HTTP</span> <span class="n">instead</span> <span class="k">of</span> <span class="n">HTTPS</span>. <span class="n">Links</span> <span class="n">relative</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">web</span> <span class="n">root</span> <span class="n">are</span> <span class="nb">not</span> <span class="n">rewritten</span>.
<span class="n">Replace</span> <span class="n">HREFs</span> (<span class="n">TEL</span>): <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">rewrite</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">href</span> <span class="n">attributes</span> <span class="k">of</span> <span class="n">telephone</span> <span class="n">links</span> (<span class="n">ie</span>, <span class="n">tel:5558585</span>) <span class="nb">to</span> <span class="n">call</span> <span class="n">a</span> <span class="n">number</span> <span class="k">of</span> <span class="n">your</span> <span class="n">choice</span>.
<span class="n">iOS</span> <span class="n">Address</span> <span class="n">Bar</span> <span class="n">Spoofing:</span> <span class="n">Mobile</span> <span class="n">Safari</span> <span class="n">iOS</span> <span class="mf">5.1</span> <span class="n">Address</span> <span class="n">Bar</span> <span class="n">Spoofing</span>. <span class="n">This</span> <span class="k">is</span> <span class="n">fixed</span> <span class="n">in</span> <span class="n">latest</span> <span class="n">version</span> <span class="k">of</span> <span class="n">Mobile</span> <span class="n">Safari</span> (<span class="n">the</span> <span class="n">URL</span> <span class="n">turns</span> <span class="s">&#39;blank&#39;</span>)
<span class="n">Overflow</span> <span class="n">Cookie</span> <span class="n">Jar:</span> <span class="n">This</span> <span class="k">module</span> <span class="n">attempts</span> <span class="nb">to</span> <span class="n">perform</span> <span class="n">John</span> <span class="n">Wilander&#39;s</span> <span class="n">CookieJar</span> <span class="n">overflow</span>.  <span class="n">He</span> <span class="n">demonstrated</span> <span class="n">this</span> <span class="n">in</span> <span class="n">his</span> <span class="s">&lt;a href=&#39;https://www.owasp.org/index.php/OWASP_1-Liner&#39;&gt;</span><span class="n">Owasp</span> <span class="mi">1</span><span class="o">-</span><span class="n">liner</span> <span class="n">project</span><span class="s">&lt;/a&gt;</span>.  <span class="n">With</span> <span class="n">this</span> <span class="k">module</span>, <span class="n">cookies</span> <span class="n">that</span> <span class="n">have</span> <span class="n">the</span> <span class="n">HTTPOnly-flag</span> <span class="o">and/or</span> <span class="n">HTTPS-flag</span> <span class="nb">can</span> <span class="n">be</span> <span class="n">wiped</span>.  <span class="n">You</span> <span class="nb">can</span> <span class="k">try</span> <span class="nb">to</span> <span class="n">recreate</span> <span class="n">these</span> <span class="n">cookies</span> <span class="n">afterwards</span> <span class="k">as</span> <span class="n">normal</span> <span class="n">cookies</span>.
<span class="n">Create</span> <span class="n">Prompt</span> <span class="n">Dialog:</span> <span class="n">Sends</span> <span class="n">a</span> <span class="n">prompt</span> <span class="n">dialog</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">browser</span>.
<span class="n">Remove</span> <span class="n">stuck</span> <span class="n">iframe:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">remove</span> <span class="nb">any</span> <span class="n">stuck</span> <span class="n">iframes</span> (<span class="n">beware</span> <span class="n">it</span> <span class="k">will</span> <span class="n">remove</span> <span class="nb">all</span> <span class="k">of</span> <span class="n">them</span> <span class="n">on</span> <span class="n">that</span> <span class="n">node</span>!).
<span class="n">Replace</span> <span class="n">Videos:</span> <span class="n">Replaces</span> <span class="n">an</span> <span class="n">object</span> <span class="n">selected</span> <span class="n">with</span> <span class="n">jQuery</span> (<span class="nb">all</span> <span class="n">embed</span> <span class="n">tags</span> <span class="nb">by</span> <span class="k">default</span>) <span class="n">with</span> <span class="n">an</span> <span class="n">embed</span> <span class="n">tag</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">youtube</span> <span class="n">video</span> <span class="k">of</span> <span class="n">your</span> <span class="n">choice</span> (<span class="n">rickroll</span> <span class="nb">by</span> <span class="k">default</span>).
<span class="n">Redirect</span> <span class="n">Browser</span> (<span class="n">Rickroll</span>): <span class="n">Overwrite</span> <span class="n">the</span> <span class="nb">body</span> <span class="k">of</span> <span class="n">the</span> <span class="n">page</span> <span class="n">the</span> <span class="n">victim</span> <span class="k">is</span> <span class="n">on</span> <span class="n">with</span> <span class="n">a</span> <span class="n">full</span> <span class="n">screen</span> <span class="n">Rickroll</span>.
<span class="n">Redirect</span> <span class="n">Browser:</span> <span class="n">This</span> <span class="k">module</span> <span class="k">will</span> <span class="n">redirect</span> <span class="n">the</span> <span class="n">selected</span> <span class="n">hooked</span> <span class="n">browser</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">address</span> <span class="n">specified</span> <span class="n">in</span> <span class="n">the</span> <span class="s">&#39;Redirect URL&#39;</span> <span class="n">input</span>.
<span class="n">Redirect</span> <span class="n">Browser</span> (<span class="n">iFrame</span>): <span class="n">This</span> <span class="k">module</span> <span class="n">creates</span> <span class="n">a</span> <span class="mi">100</span>% <span class="o">x</span> <span class="mi">100</span>% <span class="n">overlaying</span> <span class="n">iframe</span> <span class="o">and</span> <span class="n">keeps</span> <span class="n">the</span> <span class="n">browers</span> <span class="n">hooked</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">framework</span>. <span class="n">The</span> <span class="n">content</span> <span class="k">of</span> <span class="n">the</span> <span class="n">iframe</span>, <span class="n">page</span> <span class="n">title</span>, <span class="n">page</span> <span class="n">shortcut</span> <span class="n">icon</span> <span class="o">and</span> <span class="n">the</span> <span class="nb">time</span> <span class="n">delay</span> <span class="n">are</span> <span class="n">specified</span> <span class="n">in</span> <span class="n">the</span> <span class="n">parameters</span> <span class="n">below</span>.<span class="s">&lt;br&gt;&lt;br&gt;</span><span class="n">The</span> <span class="n">content</span> <span class="k">of</span> <span class="n">the</span> <span class="n">URL</span> <span class="n">bar</span> <span class="k">will</span> <span class="nb">not</span> <span class="n">be</span> <span class="n">changed</span> <span class="n">in</span> <span class="n">the</span> <span class="n">hooked</span> <span class="n">browser</span>.
</pre></div>


<h2 id="beef-restful-api">beef RESTful API</h2>
<p><a href="https://github.com/beefproject/beef/wiki/BeEF-RESTful-API">RESTful API</a></p>
<h2 id="extension">extension</h2>
<ul>
<li>metasploit</li>
</ul>
<p>beef 根目录下修改 config.yaml 文件</p>
<div class="hlcode"><pre>extension:
        ......
        metasploit:
            enable: true
</pre></div>


<p>/beef/extensions/metasploit/config.yaml</p>
<div class="hlcode"><pre>    name: &#39;Metasploit&#39;
    enable: true
    host: &quot;127.0.0.1&quot;
    port: 55552
    user: &quot;msf&quot;
    pass: &quot;abc123&quot;
    uri: &#39;/api&#39;
    ssl: true
    ssl_version: &#39;TLSv1&#39;
    ssl_verify: true
    callback_host: &quot;127.0.0.1&quot;
    autopwn_url: &quot;autopwn&quot;
</pre></div>


<p>ip and callbak_host can be change to your host ip</p>
<p>then run in terminal</p>
<div class="hlcode"><pre><span class="p">$</span><span class="nv">msfconsole</span><span class="x"></span>

<span class="x">msf&gt; load msgrpc ServerHost=127.0.0.1 User=msf Pass=abc123 SSL=y</span>

<span class="p">$</span><span class="x">./beef</span>
</pre></div>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>