<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>Beef - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Kali2">Kali2</a>&nbsp;»&nbsp;Beef</div>
</div>
<div class="clearfix"></div>
<div id="title">Beef</div>
  <div id="content">
  <h2 id="beef">beef 简介</h2>
<h2 id="beef_1">beef 安装</h2>
<h2 id="beef_2">beef 使用</h2>
<ul>
<li>构造自己的hook html</li>
</ul>
<p>只用将beef 提供的hook.js嵌入到自己构造的html页面就能作为可以hook的页面。</p>
<ul>
<li>./beef -h</li>
</ul>
<div class="hlcode"><pre><span class="n">Usage</span><span class="o">:</span> <span class="n">beef</span> <span class="o">[</span><span class="n">options</span><span class="o">]</span>
    <span class="o">-</span><span class="n">x</span><span class="o">,</span> <span class="o">--</span><span class="n">reset</span>                      <span class="n">Reset</span> <span class="n">the</span> <span class="n">database</span>
    <span class="o">-</span><span class="n">v</span><span class="o">,</span> <span class="o">--</span><span class="n">verbose</span>                    <span class="n">Display</span> <span class="n">debug</span> <span class="n">information</span>
    <span class="o">-</span><span class="n">a</span><span class="o">,</span> <span class="o">--</span><span class="n">ascii_art</span>                  <span class="n">Prints</span> <span class="n">BeEF</span> <span class="n">ascii</span> <span class="n">art</span>
    <span class="o">-</span><span class="n">c</span><span class="o">,</span> <span class="o">--</span><span class="n">config</span> <span class="n">FILE</span>                <span class="n">Load</span> <span class="n">a</span> <span class="n">different</span> <span class="n">configuration</span> <span class="n">file</span><span class="o">:</span> <span class="k">if</span> <span class="n">it</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">called</span> <span class="n">custom</span><span class="o">-</span><span class="n">config</span><span class="o">.</span><span class="na">yaml</span><span class="o">,</span> <span class="n">git</span> <span class="n">automatically</span> <span class="n">ignores</span> <span class="n">it</span><span class="o">.</span>
    <span class="o">-</span><span class="n">p</span><span class="o">,</span> <span class="o">--</span><span class="n">port</span> <span class="n">PORT</span>                  <span class="n">Change</span> <span class="n">the</span> <span class="k">default</span> <span class="n">BeEF</span> <span class="n">listening</span> <span class="n">port</span>
    <span class="o">-</span><span class="n">w</span><span class="o">,</span> <span class="o">--</span><span class="n">wsport</span> <span class="n">WS_PORT</span>             <span class="n">Change</span> <span class="n">the</span> <span class="k">default</span> <span class="n">BeEF</span> <span class="n">WebSocket</span> <span class="n">listening</span> <span class="n">port</span>
    <span class="o">-</span><span class="n">i</span><span class="o">,</span> <span class="o">--</span><span class="n">interactive</span>                <span class="n">Starts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">Console</span> <span class="n">Shell</span> <span class="n">activated</span>
</pre></div>


<h2 id="beef-project">beef project 结构</h2>
<h2 id="modules">modules</h2>
<p>modules 分为12类</p>
<p>每类里面最底层的方法构成: command.js, config.yaml, module.rb</p>
<ul>
<li>Browser</li>
</ul>
<p>Hooked Domain</p>
<div class="hlcode"><pre><span class="nx">Fingerprint</span> <span class="nx">Ajax</span><span class="p">:</span> <span class="nx">Fingerprint</span> <span class="nx">Ajax</span> <span class="ow">and</span> <span class="nx">JS</span> <span class="nx">libraries</span> <span class="nx">present</span> <span class="k">on</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">page.</span>
<span class="nb">Create</span> <span class="nx">Alert</span> <span class="nx">Dialog</span><span class="p">:</span> <span class="nx">Sends</span> <span class="nx">an</span> <span class="nx">alert</span> <span class="nx">dialog</span> <span class="k">to</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">browser.</span>
<span class="nb">Clear</span> <span class="nx">Console</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">clears</span> <span class="nx">the</span> <span class="nx">Chrome</span> <span class="nx">developer</span> <span class="nx">console</span> <span class="nx">buffer.</span>
<span class="nb">Replace</span> <span class="nb">Content</span> <span class="p">(</span><span class="nx">Deface</span><span class="p">):</span> <span class="nx">Overwrite</span> <span class="nx">the</span> <span class="nx">page</span><span class="p">,</span> <span class="nb">title</span> <span class="ow">and</span> <span class="nx">shortcut</span> <span class="nx">icon</span> <span class="k">on</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">page.</span>
<span class="nb">Replace</span> <span class="nb">Component</span> <span class="p">(</span><span class="nx">Deface</span><span class="p">):</span> <span class="nx">Overwrite</span> <span class="nx">a</span> <span class="nx">particular</span> <span class="nb">component</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">page.</span>
<span class="nx">Disable</span> <span class="nx">Developer</span> <span class="nx">Tools</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">prevents</span> <span class="nx">users</span> <span class="nb">from</span> <span class="nx">executing</span> <span class="nb">JavaScript</span> <span class="nx">within</span> <span class="nx">the</span> <span class="nx">Internet</span> <span class="nx">Explorer</span> <span class="nx">Developer</span> <span class="nx">Tools</span> <span class="nx">console.</span>
<span class="nb">Get</span> <span class="nb">Cookie</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nb">retrieve</span> <span class="nx">the</span> <span class="nx">session</span> <span class="nb">cookie</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">page.</span>
<span class="nb">Get</span> <span class="nb">Form</span> <span class="nb">Values</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">retrieves</span> <span class="nx">the</span> <span class="nb">name</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span> <span class="ow">and</span> <span class="nb">value</span> <span class="nx">of</span> <span class="kc">all</span> <span class="nb">input</span> <span class="nx">fields</span> <span class="k">on</span> <span class="nx">the</span> <span class="nx">page.</span>
<span class="nb">Get</span> <span class="kd">Local</span> <span class="nx">Storage</span><span class="p">:</span> <span class="nx">Extracts</span> <span class="kd">data</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">HTML5</span> <span class="nx">localStorage</span> <span class="nx">object.</span>
<span class="nb">Get</span> <span class="nx">Page</span> <span class="nx">HTML</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nb">retrieve</span> <span class="nx">the</span> <span class="nx">HTML</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">page.</span>
<span class="nb">Get</span> <span class="nx">Page</span> <span class="ow">and</span> <span class="nx">iframe</span> <span class="nx">HTML</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nb">retrieve</span> <span class="nx">the</span> <span class="nx">HTML</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">page</span> <span class="ow">and</span> <span class="nb">any</span> <span class="nx">iframes</span> <span class="p">(</span><span class="nx">that</span> <span class="nx">have</span> <span class="nx">the</span> <span class="nx">same</span> <span class="nx">origin</span><span class="p">)</span><span class="nx">.</span>
<span class="nb">Get</span> <span class="nx">Page</span> <span class="nx">HREFs</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nb">retrieve</span> <span class="nx">HREFs</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nb">target</span> <span class="nx">page.</span>
<span class="nb">Get</span> <span class="nx">Session</span> <span class="nx">Storage</span><span class="p">:</span> <span class="nx">Extracts</span> <span class="kd">data</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">HTML5</span> <span class="nx">sessionStorage</span> <span class="nx">object.</span>
<span class="nb">Get</span> <span class="nx">Stored</span> <span class="nx">Credentials</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">retrieves</span> <span class="nx">saved</span> <span class="nx">username</span><span class="p">/</span><span class="nx">password</span> <span class="nx">combinations</span> <span class="nb">from</span> <span class="nx">the</span> <span class="nx">login</span> <span class="nx">page</span> <span class="k">on</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">domain.</span><span class="o">&lt;</span><span class="nx">br</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span><span class="nx">It</span> <span class="nx">will</span> <span class="nb">fail</span> <span class="k">if</span> <span class="nx">more</span> <span class="nx">than</span> <span class="nx">one</span> <span class="nb">set</span> <span class="nx">of</span> <span class="nx">domain</span> <span class="nx">credentials</span> <span class="nx">are</span> <span class="n">saved</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">browser.</span>
<span class="nb">Replace</span> <span class="nx">HREFs</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nx">rewrite</span> <span class="kc">all</span> <span class="nx">the</span> <span class="nb">href</span> <span class="nb">attributes</span> <span class="nx">of</span> <span class="kc">all</span> <span class="nx">matched</span> <span class="nx">links.</span>
<span class="nb">Replace</span> <span class="nx">HREFs</span> <span class="p">(</span><span class="nx">Click</span> <span class="nb">Events</span><span class="p">):</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nx">rewrite</span> <span class="kc">all</span> <span class="nx">the</span> <span class="nb">href</span> <span class="nb">attributes</span> <span class="nx">of</span> <span class="kc">all</span> <span class="nx">matched</span> <span class="nx">links</span> <span class="nx">using</span> <span class="nx">Bilawal</span> <span class="nx">Hameed</span><span class="s1">&#39;s updating of click event handling. This will hide the target site for all updated links.</span>
<span class="s1">Replace HREFs (HTTPS): This module will rewrite all the href attributes of HTTPS links to use HTTP instead of HTTPS. Links relative to the web root are not rewritten.</span>
<span class="s1">Replace HREFs (TEL): This module will rewrite all the href attributes of telephone links (ie, tel:5558585) to call a number of your choice.</span>
<span class="s1">iOS Address Bar Spoofing: Mobile Safari iOS 5.1 Address Bar Spoofing. This is fixed in latest version of Mobile Safari (the URL turns &#39;</span><span class="nx">blank</span><span class="s1">&#39;)</span>
<span class="s1">Overflow Cookie Jar: This module attempts to perform John Wilander&#39;</span><span class="nb">s</span> <span class="nx">CookieJar</span> <span class="nx">overflow.</span>  <span class="nx">He</span> <span class="nx">demonstrated</span> <span class="n">this</span> <span class="k">in</span> <span class="nx">his</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="n">href</span><span class="o">=</span><span class="s1">&#39;https://www.owasp.org/index.php/OWASP_1-Liner&#39;</span><span class="o">&gt;</span><span class="nx">Owasp</span> <span class="mi">1</span><span class="na">-liner</span> <span class="nx">project</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">.</span>  <span class="k">With</span> <span class="nx">this</span> <span class="nx">module</span><span class="p">,</span> <span class="nb">cookies</span> <span class="nx">that</span> <span class="nx">have</span> <span class="nx">the</span> <span class="nx">HTTPOnly</span><span class="na">-flag</span> <span class="ow">and</span><span class="p">/</span><span class="nb">or</span> <span class="nx">HTTPS</span><span class="na">-flag</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">wiped.</span>  <span class="nx">You</span> <span class="nx">can</span> <span class="nx">try</span> <span class="k">to</span> <span class="nx">recreate</span> <span class="nx">these</span> <span class="nb">cookies</span> <span class="nx">afterwards</span> <span class="nx">as</span> <span class="nx">normal</span> <span class="nx">cookies.</span>
<span class="nb">Create</span> <span class="nx">Prompt</span> <span class="nx">Dialog</span><span class="p">:</span> <span class="nx">Sends</span> <span class="nx">a</span> <span class="nx">prompt</span> <span class="nx">dialog</span> <span class="k">to</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">browser.</span>
<span class="nb">Remove</span> <span class="nx">stuck</span> <span class="nx">iframe</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nb">remove</span> <span class="nb">any</span> <span class="nx">stuck</span> <span class="nx">iframes</span> <span class="p">(</span><span class="nx">beware</span> <span class="nx">it</span> <span class="nx">will</span> <span class="nb">remove</span> <span class="kc">all</span> <span class="nx">of</span> <span class="nx">them</span> <span class="k">on</span> <span class="nx">that</span> <span class="nx">node</span><span class="o">!</span><span class="p">)</span><span class="nx">.</span>
<span class="nb">Replace</span> <span class="nx">Videos</span><span class="p">:</span> <span class="nx">Replaces</span> <span class="nx">an</span> <span class="nb">object</span> <span class="nb">selected</span> <span class="k">with</span> <span class="nx">jQuery</span> <span class="p">(</span><span class="kc">all</span> <span class="nx">embed</span> <span class="nb">tags</span> <span class="k">by</span> <span class="nb">default</span><span class="p">)</span> <span class="k">with</span> <span class="nx">an</span> <span class="nx">embed</span> <span class="kt">tag</span> <span class="nx">containing</span> <span class="nx">the</span> <span class="nx">youtube</span> <span class="nx">video</span> <span class="nx">of</span> <span class="nx">your</span> <span class="nx">choice</span> <span class="p">(</span><span class="nx">rickroll</span> <span class="k">by</span> <span class="nb">default</span><span class="p">)</span><span class="nx">.</span>
<span class="nx">Redirect</span> <span class="nx">Browser</span> <span class="p">(</span><span class="nx">Rickroll</span><span class="p">):</span> <span class="nx">Overwrite</span> <span class="nx">the</span> <span class="nb">body</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">page</span> <span class="nx">the</span> <span class="nx">victim</span> <span class="nx">is</span> <span class="k">on</span> <span class="k">with</span> <span class="nx">a</span> <span class="kc">full</span> <span class="nx">screen</span> <span class="nx">Rickroll.</span>
<span class="nx">Redirect</span> <span class="nx">Browser</span><span class="p">:</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">will</span> <span class="nx">redirect</span> <span class="nx">the</span> <span class="nb">selected</span> <span class="nx">hooked</span> <span class="nx">browser</span> <span class="k">to</span> <span class="nx">the</span> <span class="nx">address</span> <span class="n">specified</span> <span class="k">in</span> <span class="nx">the</span> <span class="s1">&#39;Redirect URL&#39;</span> <span class="nx">input.</span>
<span class="nx">Redirect</span> <span class="nx">Browser</span> <span class="p">(</span><span class="nx">iFrame</span><span class="p">):</span> <span class="nx">This</span> <span class="nx">module</span> <span class="nx">creates</span> <span class="nx">a</span> <span class="mi">100</span><span class="o">%</span> <span class="nx">x</span> <span class="mi">100</span><span class="o">%</span> <span class="nx">overlaying</span> <span class="nx">iframe</span> <span class="ow">and</span> <span class="nx">keeps</span> <span class="nx">the</span> <span class="nx">browers</span> <span class="nx">hooked</span> <span class="k">to</span> <span class="nx">the</span> <span class="nx">framework.</span> <span class="nx">The</span> <span class="nb">content</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">iframe</span><span class="p">,</span> <span class="nx">page</span> <span class="nb">title</span><span class="p">,</span> <span class="nx">page</span> <span class="nx">shortcut</span> <span class="nx">icon</span> <span class="ow">and</span> <span class="nx">the</span> <span class="nb">time</span> <span class="nx">delay</span> <span class="nx">are</span> <span class="n">specified</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">parameters</span> <span class="nx">below.</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;&lt;</span><span class="nx">br</span><span class="o">&gt;</span><span class="nx">The</span> <span class="nb">content</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nb">URL</span> <span class="nx">bar</span> <span class="nx">will</span> <span class="ow">not</span> <span class="nx">be</span> <span class="n">changed</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">hooked</span> <span class="nx">browser.</span>
</pre></div>


<h2 id="beef-restful-api">beef RESTful API</h2>
<p><a href="https://github.com/beefproject/beef/wiki/BeEF-RESTful-API">RESTful API</a></p>
<h2 id="extension">extension</h2>
<ul>
<li>metasploit</li>
</ul>
<p>beef 根目录下修改 config.yaml 文件</p>
<div class="hlcode"><pre><span class="nl">extension:</span>
        <span class="p">......</span>
        <span class="nl">metasploit:</span>
            <span class="nl">enable:</span> <span class="nb">true</span>
</pre></div>


<p>/beef/extensions/metasploit/config.yaml</p>
<div class="hlcode"><pre>    <span class="nl">name:</span> <span class="err">&#39;</span><span class="n">Metasploit</span><span class="err">&#39;</span>
    <span class="nl">enable:</span> <span class="nb">true</span>
    <span class="nl">host:</span> <span class="s">&quot;127.0.0.1&quot;</span>
    <span class="nl">port:</span> <span class="mi">55552</span>
    <span class="nl">user:</span> <span class="s">&quot;msf&quot;</span>
    <span class="nl">pass:</span> <span class="s">&quot;abc123&quot;</span>
    <span class="nl">uri:</span> <span class="err">&#39;</span><span class="o">/</span><span class="n">api</span><span class="err">&#39;</span>
    <span class="nl">ssl:</span> <span class="nb">true</span>
    <span class="nl">ssl_version:</span> <span class="err">&#39;</span><span class="n">TLSv1</span><span class="err">&#39;</span>
    <span class="nl">ssl_verify:</span> <span class="nb">true</span>
    <span class="nl">callback_host:</span> <span class="s">&quot;127.0.0.1&quot;</span>
    <span class="nl">autopwn_url:</span> <span class="s">&quot;autopwn&quot;</span>
</pre></div>


<p>ip and callbak_host can be change to your host ip</p>
<p>then run in terminal</p>
<div class="hlcode"><pre><span class="err">$</span><span class="n">msfconsole</span>

<span class="n">msf</span><span class="o">&gt;</span> <span class="n">load</span> <span class="n">msgrpc</span> <span class="n">ServerHost</span><span class="o">=</span><span class="mf">127.0.0.1</span> <span class="n">User</span><span class="o">=</span><span class="n">msf</span> <span class="n">Pass</span><span class="o">=</span><span class="n">abc123</span> <span class="n">SSL</span><span class="o">=</span><span class="n">y</span>

<span class="err">$</span><span class="p">.</span><span class="o">/</span><span class="n">beef</span>
</pre></div>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>