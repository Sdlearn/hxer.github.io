<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>tmux - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Kali2">Kali2</a>&nbsp;»&nbsp;tmux</div>
</div>
<div class="clearfix"></div>
<div id="title">tmux</div>
  <div id="content">
  <h2 id="_1">简介</h2>
<p>Tmux 是一个工具，用于在一个终端窗口中运行多个终端会话。不仅如此，你还可以通过 Tmux 使终端会话运行于后台或是按需接入、断开会话</p>
<p><a href="http://mingxinglai.com/cn/2012/09/tmux/">tmux 配置</a></p>
<p>tmux是典型的c/s架构。有如下几个概念。</p>
<ul>
<li>session</li>
</ul>
<p>session是一个特定的终端组合。输入tmux就可以打开一个新的session。</p>
<ul>
<li>window</li>
</ul>
<p>window 为session中的终端。</p>
<ul>
<li>pane </li>
</ul>
<p>pane为一个window分隔出来的各个间隔，即window中的终端。</p>
<h2 id="install">install</h2>
<div class="hlcode"><pre>apt-get install tmux
</pre></div>


<h2 id="_2">基本用法</h2>
<p>tmux的所有操作必须先使用一个前缀键进入命令模式，或者说进入控制台，就像vi中的esc。默认的前缀为<c-b>,比较难按，很多人会改为screen中的<c-a>，来保持一致性。</p>
<p>进入命令模式，输入<strong>?</strong>显示所有的bind-key,按 q 退出。</p>
<p>Tmux 的配置文件 ~/.tmux.conf</p>
<p>系统默认 bind-key, 省略了前缀键:</p>
<ul>
<li>复制粘贴</li>
</ul>
<div class="hlcode"><pre>[   : 进入复制模式。
]   : 粘贴
</pre></div>


<p>进入复制模式后，按下sapce就可以选择文本。回车键进行复制</p>
<ul>
<li>session操作</li>
</ul>
<div class="hlcode"><pre>s   : 列出当前 Tmux 中的会话
d   : deattch当前session。输入tmux attach [-t sessionname]重新进入该session。
$   : 重命名当前session

&lt;c-z&gt; : 挂起当前session
</pre></div>


<ul>
<li>window操作</li>
</ul>
<div class="hlcode"><pre>c   : 创建一个新的window
b   : 重命名当前window
&amp;   : 关闭当前window
n   : 移动到下一个窗口
p   : 移动到前一个窗口
l   : 切换到上一个窗口
w   : 列出所有窗口编号,并进行选择切换编号,移动到指定编号的窗口。
.   : 修改窗口编号，相当于排序。
f   : 搜索所有的窗
</pre></div>


<p>若要切换窗口，只需要先按下Ctrl-b，然后再按下想切换的窗口所对应的数字，该数字会紧挨着窗口的名字显示</p>
<ul>
<li>pane操作</li>
</ul>
<div class="hlcode"><pre>&quot;   : 横向分割
%   : 纵向分割
方向键 : 在pane直接移动
o   : 到下一个pane
opt+方向键 : 调整pane大小
{ / } : 左右pane交换
空格 : 横竖切换
q   : 显示pane的编号
x   : 关闭当前pane
</pre></div>


<h2 id="_3">自定义配置文件</h2>
<ul>
<li>reload conf</li>
</ul>
<div class="hlcode"><pre># bind a reload key r
bind r source-file ~/.tmux.conf ; display-message &quot;Config reloaded..&quot;
</pre></div>


<ul>
<li>vim</li>
</ul>
<div class="hlcode"><pre>set -g status-keys vi
setw -g mode-keys vi
</pre></div>


<ul>
<li>复制粘贴</li>
</ul>
<div class="hlcode"><pre># Copy and paste like in vim
unbind [
unbind ]
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy &#39;v&#39; begin-selection
bind -t vi-copy &#39;y&#39; copy-selection
</pre></div>


<p>设置 Tmux esc进入复制模式，使用 v 键选择文本，用 y 键复制文本</p>
<p>所有的复制都会被记录到缓冲区，输入#或者 tmux list-buffers查看缓冲区,同时也进入了复制模式。也可以使用”=”来选择并粘贴缓冲区内容</p>
<p>在默认情况下，当从 Tmux 中复制文本时，复制下来的文本只能粘贴到同一个 Tmux 会话中。若要使复制下来的文本可以粘贴到任何位置，就需要让 Tmux 将文本复制到系统的剪贴板</p>
<p>使用 xclip 同样键入y复制buffer中最新的内容到系统剪贴板，配置如下</p>
<div class="hlcode"><pre>bind y run-shell &quot;tmux show-buffer | xclip -sel clip -i&quot; \; display-message &quot;Copied tmux buffer to system clipboard&quot;
</pre></div>


<ul>
<li>状态栏</li>
</ul>
<div class="hlcode"><pre># 状态栏

# 颜色
  set -g status-bg black
  set -g status-fg white

# 对齐方式
  set-option -g status-justify centre

# 左下角
  set-option -g status-left &#39;#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]&#39;
  set-option -g status-left-length 20

# 窗口列表
  setw -g automatic-rename on
  set-window-option -g window-status-format &#39;#[dim]#I:#[default]#W#[fg=grey,dim]&#39;
  set-window-option -g window-status-current-format &#39;#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]&#39;

# 右下角
  set -g status-right &#39;#[fg=green][#[fg=cyan]%Y-%m-%d#[fg=green]]&#39;
</pre></div>


<h2 id="tmux">tmux命令</h2>
<div class="hlcode"><pre><span class="p">$</span><span class="nv">tmux</span><span class="x"> --h</span>
<span class="x">usage: tmux [-2CluvV] [-c shell-command] [-f file] [-L socket-name]</span>
<span class="x">            [-S socket-path] [command [flags]]</span>
</pre></div>


<ul>
<li>会话</li>
</ul>
<div class="hlcode"><pre>tmux new -s session
tmux new -s session -d #在后台建立会话
tmux ls #列出会话
tmux attach -t session #进入某个会话
</pre></div>


<p>tmux中创建一个新的会话，只需要按下 Ctrl-b : ，然后输入如下的命令：</p>
<div class="hlcode"><pre>new -s &lt;name-of-my-new-session&gt;
</pre></div>


<h2 id="_4">配置</h2>
<p>~/.tmux.conf</p>
<div class="hlcode"><pre>#-- base settings --#
set -g default-terminal &quot;screen-256color&quot;
set -g display-time 3000
set -g escape-time 0
set -g history-limit 65535
set -g base-index 1
set -g pane-base-index 1

# vi mode
set -g status-keys vi
setw -g mode-keys vi

# 开启status-bar uft-8支持
set -g status-utf8 on

set -g status-interval 1

set -g visual-activity on
setw -g monitor-activity on

# 状态栏

# 颜色
  set -g status-bg black
  set -g status-fg white

# 对齐方式
  set-option -g status-justify centre

# 左下角
  # set-option -g status-left &#39;#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]&#39;
  set-option -g status-left &quot;#[fg=green]s#S:w#I.p#P#[default]&quot;
  set-option -g status-left-length 20

# 窗口列表
  setw -g automatic-rename on
  set-window-option -g window-status-format &#39;#[dim]#I:#[default]#W#[fg=grey,dim]&#39;
  set-window-option -g window-status-current-format &#39;#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]&#39;

# 右下角
  set -g status-right &#39;#[fg=green][#[fg=cyan]%Y-%m-%d#[fg=green]]&#39;



# prefix C-x
unbind C-b
set -g prefix C-x

# Copy and paste like in vim
unbind [
unbind ]
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy &#39;v&#39; begin-selection
bind -t vi-copy &#39;y&#39; copy-selection

bind y run-shell &quot;tmux show-buffer | xclip -sel clip -i&quot; \; display-message &quot;Copied tmux buffer to system clipboard&quot;


unbind %
bind | splitw -h # horizontal split (prefix |)

# bind a reload key r
bind r source-file ~/.tmux.conf ; display-message &quot;Config reloaded..&quot;

# 同一个窗口中的面板操作--------------
#up
bind-key k select-pane -U
#down
bind-key j select-pane -D
#left
bind-key h select-pane -L
#right
bind-key l select-pane -R

# swap panes
bind ^u swapp -U
bind ^d swapp -D


# window --------------------------

#select last window
bind-key C-l select-window -l

bind-key D source-file ~/.tmux/layout
</pre></div>


<p>键入 Ctrl + b D (D是大写，要按shrift)，即会自动执行layout脚本</p>
<p>~/.tmux/layout</p>
<div class="hlcode"><pre>selectp -t 1     #选中第0个窗格
splitw -h -p 50  #将其分成左右两个
selectp -t 2     #选中第一个，也就是右边那个
splitw -v -p 50  #将其分成上下两个，这样就变成了图中的布局了
selectp -t 1     #选回第一个
</pre></div>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>