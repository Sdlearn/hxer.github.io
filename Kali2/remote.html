<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>Remote access - Wiki | janes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Kali2">Kali2</a>&nbsp;»&nbsp;Remote access</div>
</div>
<div class="clearfix"></div>
<div id="title">Remote access</div>
  <div id="content">
  <h2 id="ssh">ssh</h2>
<ul>
<li>ssh login</li>
</ul>
<div class="hlcode"><pre><span class="n">ssh</span> <span class="o">-</span><span class="n">l</span> <span class="n">root</span> <span class="n">ip</span>

<span class="n">or</span>

<span class="n">ssh</span> <span class="n">root</span><span class="err">@</span><span class="n">ip</span>
</pre></div>


<ul>
<li>ssh-keygen [-f <filename>]</li>
</ul>
<p>ssh-keygen 生成公钥和私钥文件，将公钥文件的内容，放到远程主机 $HOME/.ssh/authorized_keys 文件中，以后就可以免密码登录</p>
<ul>
<li>ssh 长连接设置</li>
</ul>
<p><strong> client </strong></p>
<div class="hlcode"><pre><span class="n">su</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span>
<span class="n">echo</span> <span class="s">&quot;    ServerAliveInterval 60&quot;</span> <span class="o">&gt;&gt;</span> <span class="n">ssh_config</span>
<span class="n">service</span> <span class="n">ssh</span> <span class="n">restart</span>
<span class="n">exit</span>
</pre></div>


<h3 id="ssh_1">SSH断开后 进程仍然在后台运行</h3>
<p>当用户注销（logout）或者网络断开时，终端会收到 HUP（hangup）信号从而关闭其所有子进程, 而bash 是 sshd 的子进程，当 ssh 断开连接时，HUP 信号会影响到它下面的所有子进程</p>
<h4 id="_1">解决思路</h4>
<ul>
<li>
<p>让进程运行在新的session(会话)里即不属于此终端的子进程。</p>
</li>
<li>
<p>可以实现让进程忽略HUP信号</p>
</li>
</ul>
<h4 id="_2">解决方法</h4>
<ul>
<li>nohup命令</li>
</ul>
<p>功能：不挂断地运行命令，忽略HUP信号。</p>
<p>语法：nohup command &amp;</p>
<ul>
<li>setsid命令</li>
</ul>
<p>功能：run a program in a new session在新的会话中运行程序</p>
<div class="hlcode"><pre><span class="n">setsid</span> <span class="n">ping</span> <span class="n">www</span><span class="p">.</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> 
</pre></div>


<p>进程的父ID(PPID)是init</p>
<ul>
<li>() 内执行命令</li>
</ul>
<div class="hlcode"><pre><span class="p">(</span><span class="n">ping</span> <span class="n">www</span><span class="p">.</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>


<p>进程的父ID(PPID)是init</p>
<ul>
<li>screen命令</li>
</ul>
<p>screen 是 init（PID为1）的子进程</p>
<h2 id="rdesktop">rdesktop</h2>
<p>rdesktop is an implementation of a client software for Microsoft's proprietary Remote Desktop Protocol (RDP). Rdesktop is free and open-source software, </p>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2016 .
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>